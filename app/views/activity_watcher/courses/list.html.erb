<div class="contents__main">
  <div class="contents__wrap">
    <p id="notice"><%= notice %></p>
    
    <h4>コースを見る</h4>
    
    <%= paginate @courses %>
    <% @courses.each do |course| %>
      <table class="table table-bordered table-word-break table-striped">
        <tr class="table-row">
          <th class="col-md-2 table-title">タイトル</th>
          <td><%= course.title.truncate(50) %></td>
        </tr>
        <tr class="table-row">
          <th class="col-md-2 table-title">履修受付開始日</th>
          <td><%= l course.student_entry_start, format: :medium %></td>
        </tr>
        <tr class="table-row">
          <th class="col-md-2 table-title">履修受付終了日</th>
          <td><%= l course.student_entry_end, format: :medium %></td>
        </tr>
        <tr class="table-row">
          <th class="col-md-2 table-title">コース詳細</th>
          <td><%= course.description.truncate(50) %></td>
        </tr>
        <tr class="table-row">
          <th class="col-md-2 table-title">アクション</th>
          <td>
            <% time_current = Time.current %>
            <% if course.user_id.present? %>
              <%= link_to list__course_tasks_url(course.id) do %>
                <button type="button" class="btn btn-success">課題を見る</button>
              <% end %>
            <% elsif (course.student_entry_start <= time_current) && (course.student_entry_end >= time_current) %>
              <%= link_to entry_course_path(course.id) do %>
                <button type="button" class="btn btn-primary">コースに参加する</button>
              <% end %>
            <% end %>
          </td>
        </tr>
      </table>
    <% end %>
    <%= paginate @courses %>
  </div>
</div>